# recreation-assistant

Участники проекта:
 - Стретенский Данила Михайлович - 5130904/10103
 - Ракитин Данила Андреевич - 5130904/10103
 - Варнавский Игорь Витальевич - 5130904/10103
---

# Этапы
## Определение проблемы
Представьте, что вы приехали в новый город и не знаете, куда можно сходить и вообще как провести свой вечер, чтобы потом остались теплые воспоминания. Наше приложение поможет вам в этом.
рег
Если вы хотите просто вкусно покушать, то бот выдаст вам рецепты вкуснейших блюд вашей любимой кухни. Если же хотите пойти погулять, то вам предоставится много различных мест, которые стоит посетить в выбранном вами городе.

## Требования
  1. По выбранному городу получить рекомендации мест для посещения
  2. По выбранному городу получить прогноз погоды и рекомендации по одежде (теплее одется или легко)
  3. Получать реценты блюд по определенным параметрам (кухня, основной ингридиент и тд.)
  4. Получать рецепты коктейлей по определенным параметрам (алкогольный или нет, основные ингридиенты и тд.)

## Архитектура
![image](https://github.com/StretenskiyDanila/recreation-assistant/assets/97761847/621fa462-85cd-400b-b6d2-500133c54eb6)

![image](https://github.com/StretenskiyDanila/recreation-assistant/assets/97761847/0adce611-8768-4af8-a519-fad01db29c3c)

Также визуализация классов программы, для показа, как сервисы взаимодействуют друг с другом (удалил ненужные классы)
![image](https://github.com/StretenskiyDanila/recreation-assistant/assets/97761847/c26f5649-c91e-40a0-b1ce-72fac2bbe6f3)

## Кодирование и отладка
Оформив необходимые требования к боту, мы приступили к написанию приложения. Сначала написали все необходимые сервисы, настроили взаимодействие с каждым API. Конечно же, после написания кода все было проверено, отлажено, чтобы работа без ошибок. Сами же тесты были написаны позже.

## Unit-тесты и итеграционное тестирвоание
В проекте практически нет отдельных функций для unit-тестов, поэтому были написаны только интеграционные.
Для отслеживания покрытия был использован Jacoco Plugin.
Так как большую часть проекта состовляются модели (для парсинга JSON), сущности таблиц и перечисления для реализации InlineKeyboard в боте, тестами были покрыты на 80% только сервисы.
![total](https://github.com/StretenskiyDanila/recreation-assistant/assets/121712099/a91063d0-5143-4b92-9ad3-0f3e63d8b734)
![services](https://github.com/StretenskiyDanila/recreation-assistant/assets/121712099/cffd4b75-76c6-491b-a659-980ec7d0d69e)



## Сборка
Для сборки проекта используется _maven_. Запуская команду `mvn package` в директории проекта, получаем сборку+все юнит/интеграционные тесты. На выходе получаем `.jar` файл, который можно запустить при помощи `java <name>.jar`

## Запуск
Перед запуском приложения необходимо добавить его образ в локальный docker registry.
Это можно сделать как вручную, так и воспользовавшись, например GitLab CI/CD. Для ручной сборки используется команда в корне проекта: `docker build -t recreation-assistant:1.0 ./`
В процессе сборки будут прогнаны также все юнит/интеграционные тесты. 
Теперь для запуска приложения достаточно выполнить одну команду: `docker run -d recreation-assistant:1.0`
